## Hello, mur!

#### Описание интерфейса
Интерфейс murIDE состоит из 10 основных элементов:

- Кнопка переключения режимов  [1] - локальное выполнение кода или выполнение кода на аппарате/режим телеуправления. При активном соединении с аппаратом иконка с ракетой будет зеленой, в противном случаи красной. 
- Кнопка запуска скрипта [2]. При нажатии на данную кнопку будет запущен текущий скрипт. Если выбран режим Local - скрипт запускается локально на вашем компьютере. Если выбран режим Robot то скрипт будет запущен удаленно на аппарате. Запуск скрипта отменяет режим телеуправления.
- Кнопка остановки скрипта [3]. При нажатии на данную кнопку будет остановлен запущенный скрипт. Если выбран режим Local - будет остановлен скрипт, запущенный на вашем компьютере. Если выбран режим Robot то остановится скрипт, запущенный удаленно. 
- Новый документ [4]. При нажатие на данную кнопку редактор кода будет очищен, изменения не сохраняться и будет создан виртуальный новый файл. 
- Сохранить текущий документ [5]. При нажатие на данную кнопку текущий скрипт будет сохранен. Если вы сохраняете виртуальный файл, то появится диалоговое окно с предложением выбрать место куда ваш файл должен быть сохранен. 
- Открыть документ [6]. При нажатие на данную появится диалоговое окно с предложением выбрать какой файл с кодом открыть. 
- Запуск режима телеуправления [7]. Вы можете запустить данный режим только перейдя в режим Robot[1] и подключившись к аппарату. При активации данного режима во вкладке Remote [10] будут отображаться видеоизображения с камер аппарата, и вы сможете управлять аппаратом при помощи геймпада. 
- Запуск симулятора [8]. При нажатие на данную кнопку откроется окно с симулятором.
- Включить/Выключить отображение телеметрии [9]. При нажатие на данную кнопку появится всплывающее окно с информацией о заряде батареи и показания с датчиков аппарата. Данная кнопка активна только при подключении к аппарату.
- Информационные вкладки [10]. Console/Messages N - отображение системных сообщений о запуске/остановке программ, так же в это окно попадают сообщения из stderr и stdout скрипта, запущенного на аппарате при активном подключение. Help - окно с данным текстом. Remote - окно в котором будут отображаться видеоизображения в режиме телеуправления [7].

#### Подключение к аппарату
Все просто - вам нужно включить аппарат, подождать пока появится WiFi (murAP), подключится к нему (пароль по умолчанию vladivostok) и... Все готово! 

#### Запуск симулятора
Запустить симулятор еще проще - достаточно нажать кнопку "Запуск симулятора" и подождать пока он откроется. Симулятор программируется точно так же как и аппарат, за исключением пары функций из pymurapi.

> **Важно**: вы не можете управлять LED лентой в симуляторе. Для получения изображений из симулятора есть специальные функции `get_image_front` и `get_image_bottom`, данные функции **НЕ**  работают на аппарате. Для получения видеоизображений воспользуйтесь функциями из OpenCV . Так же важно отметить, формат некоторых данных различен (показания курса, глубины). Имейте это ввиду.

#### Программирование - инициализация

Первым делом вам необходимо подключить библиотеку pymurapi. Для того, чтобы это сделать вызовите следующий код:

```Python
import pymurapi as mur
```

В дальнейшем mur будет использоваться в качестве алиаса на библиотеку pymurapi.

Далее вам необходимо создать экземпляр объекта MurApiBase. Для этого вызовите функцию mur_init():

```python
auv = mur.mur_init()
```

> **Важно:** Функция mur_init должна быть вызвана только один раз! Множественные вызовы данной функции ведут к неопределенному поведению.

Все готово! Библиотека pymurapi подключена и инициализирована. Вся дальнейшая работа с аппаратом или симулятором будет происходить через объект auv.

#### Список функций и их описание

```Python
def set_on_delay(value)
# C помощью данной функции вы можете задать время, которое будет гореть LED лента на аппарате. 
# Данная функция работает только на аппарате. 
# Время задается в секундах.
# Пример использования:
auv.set_on_delay(0.5) 
```

```Python
def set_off_delay(value)
# C помощью данной функции вы можете задать время, которое LED лента гореть не будет. 
# Данная функция работает только на аппарате. 
# Время задается в секундах.
# Пример использования:
auv.set_off_delay(1.8) 
```

```Python
def set_rgb_color(r, g, b):
# C помощью данной функции вы можете задать цвет LED ленты в цветовом пространстве RGB.
# Данная функция работает только на аппарате. 
# Пример использования:
auv.set_rgb_color(128, 0, 64) 
```

```Python
def set_single_led_color(led, r, g, b):
# C помощью данной функции вы можете задать цвет отдельных светодиодов на LED ленте в формате RGB.
# На LED ленте 13 светодиодов. 0 - это номер первого светодиода, 12 - последнего.
# Данная функция работает только на аппаратах MiddleAUV выпущенных мая 2021 года и позже. 
# Пример использования:
auv.set_single_led_color(12, 255, 0, 0) 
```

```Python
def set_motor_power(motor_id, power)
# C помощью данной функции вы можете задать тягу на моторы от -100 до 100. Где motor_id - номер мотора от 0 до 5 для аппарата и от 0 до 3 для симулятора. 
# Пример использования:
auv.set_motor_power(0, 50) 
auv.set_motor_power(1, -50) 
```


> **Важно:** В симуляторе моторы 0 и 1 отвечают за движение вперед/назад. Мотор 2 и 3 за всплытие/погружение. Мотор  4 за движение влево/вправо. 

```Python
def get_depth()
# Данная функция возвращает значение глубины. 
# Пример использования:
depth = auv.get_depth()
```

```Python
def get_yaw()
# Данная функция возвращает значение курса. 
# Пример использования:
yaw = auv.get_yaw()
```

```Python
def get_pitch()
# Данная функция возвращает значение крена. 
# Пример использования:
pitch = auv.get_pitch()
```

```Python
def get_roll()
# Данная функция возвращает значение диффирента. 
# Пример использования:
roll = auv.get_roll()
```

#### Функции, доступные **ТОЛЬКО** в симуляторе:

> **Важно:** Функции, приведенные ниже, доступны только в симуляторе, на аппарате данный код работать **НЕ** будет. *Мы вас предупредили*.

```Python 
def get_image_front()
# Даная функция возвращает изображение с передней камеры - тип cv2.Mat (BGR, CV8_UC3).
# Данная функция работает только в симуляторе. 
# Пример использования:
image = auv.get_image_front()
```

```Python
def get_image_bottom()
# Даная функция возвращает изображение с донной камеры - тип cv2.Mat (BGR, CV8_UC3).
# Данная функция работает только в симуляторе. 
# Пример использования:
image = auv.get_image_front()
```

```Python
def drop()
# Вызов данный функции приведет к сбросу сферического объектов в симуляторе.
auv.drop()
```

```python
def shoot()
# Вызов данный функции приведет к выстрелу целиндрическим объектов в симуляторе.
auv.shoot()
```

```Python
def open_grabber()
# Вызов данный функции приведет к раскрытию захвата в симуляторе.
auv.open_grabber()
```

```Python
def close_grabber()
# Вызов данный функции приведет к закрытию захвата в симуляторе.
# Если в момент вызова захвата находился в контакте с объектом, то объект будет "захвачен".
auv.close_grabber()
```

```Python
def get_pinger_data(pinger_id):
# Данная функция возвращает угол и расстояния до гидроакустического маяка на сцене.
# Всего может быть до четырех маяков в одной сцене.
# Аргументом данной функции является ID маяка (0, 1, 2 или 3). 
# Если маяк с таким ID на сцене отсутствует - данная функция вернет 0, 0.
# Маяки имеют определенную частоту обновления. По умолчанию частота обновления значений установлена в 2000 миллисекунд. 
# Значение частоты обновления может быть изменено в настройках симулятора.
angle, distance = auv.get_pinger_data(0)
angle, distance = auv.get_pinger_data(3)
```

### Работа с MiddleUSV

API для работы с MiddleUSV очень похож, на API для работы с MiddleAUV. Ниже будут рассмотренны основные различия между ними.


#### Программирование - инициализация

Первым делом вам необходимо подключить библиотеку pymurapi. Для того, чтобы это сделать вызовите следующий код:

```Python
import pymurapi as mur
```

В дальнейшем mur будет использоваться в качестве алиаса на библиотеку pymurapi.

Далее вам необходимо создать экземпляр объекта MurApiBase. Для этого вызовите функцию mur_init():

```python
usv = mur.usv_init()
```

#### Список функций и их описание специфичных для MiddleUSV

#### Список функций специфичных для MiddleUSV

```python
def set_servo(angle):
# С помощью данной функции можно установить угол поворота серво-камеры
# аргумент angle - целое число от 0 до 180
usv.set_servo(90)
```
```python
def get_gps_satellites(self):
# Функция возвращает количество видимых спутников GPS 
sat = usv.get_gps_satellites()
```
```python
def get_gps_alt(self):
# Функция возвращает высоту по GPS
alt = usv.get_gps_alt()
```
```python
def get_gps_lat(self):
# Функця возвращает широту по GPS
lat = usv.get_gps_lat()
```
```python
def get_gps_lng(self):
# Функця возвращает долготу по GPS
lng = usv.get_gps_lng()
```
```python
def get_gps_speed(self):
# Функця возвращает скорость в км\ч по GPS
kmph = usv.get_gps_speed()
```
```python
def get_gps_yaw(self):
# Функця возвращает курс относительно севера по GPS
yaw = usv.get_gps_yaw()
```

#### Функции, **не доступные** для MiddleUSV:

```python 
def get_depth()
```
